{extends file="mods/search/cabinet_search.html"}

{block name="javascript"}
<link rel="stylesheet" href="/ss1/jqtransform.css" type="text/css" media="all" />
<script type="text/javascript" src="/ssj/jquery.jqtransform.js" ></script>
<script type="text/javascript" src="/sj/cls/Errors.js"></script>
<script type="text/javascript">
    var errs = {literal}{{/literal}{foreach key=k item=i name=n from=$errs}{if !$smarty.foreach.n.first}, {/if}'{$k}' : '{$i}'{/foreach}{literal}}{/literal};
    $(document).ready(function()
    {
        oErrors.Show();
        oUsers.InitRegistration();
    });
	$(function(){
			$('.xform').jqTransform({ imgPath:'/ssi/' });
	});	
</script>
{/block}

{block name="content"}
<div class="contentArea">
<!--LEFT-->
<div class="colLeft" style="min-height:1000px; margin-bottom:10px;">

  <div id="signUparea" style="padding-left:15px;">
<h1 align="center">Sign up as {if $status==1}fan{else}artist{/if}</h1>
<div class="clear"></div>
	{if $errs}
    <div class="alert alert_error">
        <a class="close" href="javascript:void(0);" onclick="$(this).parent().hide();" title="close">×</a>
        <strong>Error!</strong> Errors were found with your registration. Please correct the highlighted fields below.
    </div>
    {/if}
<!--LEFT-->

<div class="colLeft">
<form action="/base/user/registration" method="post" id="reg_form" class="big_form">
   <input type="hidden" name="status" id="status" value="{$status}" >
     
  <table border="0" cellspacing="0" cellpadding="2" align="left" class="floatL">
  <tr>
        <td>
        	<span style="font-size:18px">Account info</span>
        </td>
    </tr>
    <tr>
      <td>Email address <span style="color:red;">*</span></td>
      <td id="err_email"></td>
    </tr>
    <tr>
      <td><label> <input type="text" name="fm[email]" id="email" value="{$fm.email}" class="txtBox" /> </label></td>      
    </tr>
    
    <tr>
      <td>Password<span style="color:red;">*</span></td>
       <td id="err_pass"></td>
    </tr>
    <tr>
      <td><input type="password" name="fm[pass]" id="pass" value="{$fm.pass}" class="txtBox" /></td>
    </tr>
    <tr>
      <td><span class="note">Minimum 6 characters</span></td>
    </tr>
    
    <tr>
      <td>Repeat Password<span style="color:red;">*</span></td>
      <td id="err_pass2"></td>
    </tr>
    <tr>
      <td><input type="password" name="fm[pass2]" id="pass2" value="{$fm.pass2}"  class="txtBox" /></td>
    </tr>
    
    <tr>
      <td>First name<span style="color:red;">*</span></td>
      <td id="err_first_name"></td>
    </tr>
    <tr>
      <td><input type="text" name="fm[first_name]" id="first_name" value="{$fm.first_name}" class="txtBox" /></td>
    </tr>
    <tr>
      <td>Last Name<span style="color:red;">*</span></td>
       <td id="err_last_name"></td>
    </tr>
    <tr>
      <td><input type="text" name="fm[last_name]" id="last_name" value="{$fm.last_name}"  class="txtBox" /></td>
    </tr>
    <tr>
      <td>User Name<span style="color:red;">*</span></td>
       <td id="err_name"></td>
    </tr>
    <tr>
      <td><input type="text"  name="fm[name]" id="name" value="{$fm.name}" class="txtBox" /></td>
    </tr>
    <tr>
      <td><span class="note">Maximum 40 characters</span></td>
    </tr>
    
    <tr>
      <td>Birth date</td>
      <td id="err_dob"></td>
    </tr>
    <tr>
      <td><table border="0" cellspacing="0" cellpadding="2" class="xform">
        <tr>
          <td><select name="fm[mm]" id="select">
            	<option value="">month</option>
                {foreach key=k item=i from=$mm}
                <option value="{$k}"{if $k==$fm.mm} selected="selected"{/if}>{$i}</option>
                {/foreach}
                    </select></td>
          <td><select name="fm[dd]" id="select2">
                <option value="">day</option>
                {foreach key=k item=i from=$dd}
                <option value="{$k}"{if $k==$fm.dd} selected="selected"{/if}>{$i}</option>
                {/foreach}</select></td>
          <td><select name="fm[yy]" id="select3">
              <option value="">year</option>
                {foreach key=k item=i from=$yy}
                <option value="{$k}"{if $k==$fm.yy} selected="selected"{/if}>{$i}</option>
                {/foreach}</select></td>
        </tr>
      </table>        <label></label></td>
    </tr>
    <tr>
      <td>Gender</td>
      <td id="err_gender"></td>
    </tr>
    <tr>
      <td><table border="0" cellspacing="0" cellpadding="2">
        <tr>
          <td><label>
            <input type="radio" id="male" value="1" name="fm[gender]"{if $fm.gender==1} checked="checked"{/if} />
          </label></td>
          <td>Male</td>
          <td><label><input type="radio" id="female" value="2" name="fm[gender]"{if $fm.gender==2} checked="checked"{/if} /></label></td>
          <td>Female</td>
          <td><label><input type="radio" id="disclose" value="0" name="fm[gender]"{if !$fm.gender} checked="checked"{/if} /></label></td>
          <td>Prefer not to disclose </td>
        </tr>
      </table></td>
    </tr>
  
    
    {if $status==2}
  <tr>
      <td>Phone</td>
       <td id="err_UserPhone"></td>
    </tr>
    <tr>
      <td><input type="text" name="fm[UserPhone]" id="user_phone" value="{$fm.UserPhone}"  class="txtBox" size="20" /></td>
    </tr>   
    <tr>
        <td>
        	<span style="font-size:18px">Artist/band info</span>
        </td>
    </tr>
  
    <tr>
      <td>Artist/band name</td>
       <td id="err_band_name"></td>
     </tr>
    <tr>
      <td>
      <input type="text" name="fm[band_name]" id="band_name" value="{$fm.band_name}" class="txtBox" />
     </td>
    </tr>
    
    
    <tr>
      <td>Years active</td>
       <td id="err_years_active"></td>
     </tr>
    <tr>
      <td>
      <input type="text" name="fm[years_active]" id="years_active" value="{$fm.years_active}" class="txtBox small_input" />
     </td>
    </tr>
    
    <tr>
      <td>Location</td>
       <td id="err_location"></td>
     </tr>
    <tr>
      <td><input type="text" name="fm[location]" value="{$fm.location}" class="txtBox" />
     </td>
    </tr>
 {/if}
 
    <tr>
      <td><b>Select Genres :</b></td>
    </tr> 
      {assign var="maxv" value=$genres|@count/2}
      {assign var="maxv" value=$maxv|ceil}       
    <tr>
      <td>
      <table border="0" cellspacing="0" cellpadding="2">
        <tr>
          <td>&nbsp; </td>
          <td id="err_genres"></td>
        </tr>      
        <tr>
        {foreach name=n key=k item=i from=$genres}
              {if $smarty.foreach.n.index mod $maxv == 0}
                 <td>
              {/if}
          		<label><input type="checkbox" id="genres{$k}" class="genres" name="fm[genres][{$k}]" value="1"{if $fm.genres.$k} checked="checked"{/if} /></label>
                <label for="genres{$k}">{$i}</label><br />
        {assign var="nv" value=$smarty.foreach.n.index+1}
              {if $nv mod $maxv == 0}
                </td>
              {/if}
        {/foreach}
       </tr>
       
      
      </table></td>
    </tr>
    
     {if $status==2} 
     
    <tr>
      <td>Members</td>
       <td id="err_members"></td>
     </tr>
    <tr>
      <td>
      <input type="text" name="fm[members]" value="{$fm.members}" class="txtBox" />
     </td>
    </tr>
    
    <tr>
      <td>Website</td>
       <td id="err_website"></td>
     </tr>
    <tr>
      <td>
      <span  class="note">http://</span> <input type="text" name="fm[website]" id="website" value="{$fm.website}" class="txtBox website_input" />
     </td>
    </tr>
      <tr>
      <td>Bio</td>
       <td>&nbsp;</td>
     </tr>
    <tr>
      <td>
      <textarea name="fm[bio]" style="width: 400px; height: 89px;" class="txtBox">{$fm.bio}</textarea>
     </td>
    </tr>
    <tr>
    <td><label>Record label(s)</label></td>
    </tr>
    <tr>
    	
    	<td>
    	<table border="0" cellspacing="0" cellpadding="2" align="left" class="floatL">
        	<tr>
            	 
                    <td colspan="2">
                        <div class="rlabel">
                        {foreach name=n key=k item=i from=$fm.record_label}
                        <div class="pitem" style="padding-bottom:5px;">
  <span class="light">Record-Label:</span> <input type="text" name="fm[record_label][]" value="{$fm.record_label.$k}" class="txtBox record_input" style="width:150px" />
 &nbsp;<span class="light">Website:</span> <input type="text" name="fm[record_label_link][]" value="{$fm.record_label_link.$k}" class="txtBox record_input"  style="width:150px" />
                           &nbsp;<a href="javascript:void(0);" class="del_label">Delete</a>
                        </div>
                        {foreachelse}
                        <div class="pitem" style="padding-bottom:5px;">
                   <span class="light">Record-Label:</span> <input type="text" name="fm[record_label][]" value="" class="txtBox record_input"  style="width:150px" />
             &nbsp;<span class="light">Website:</span> <input type="text" name="fm[record_label_link][]" value="" class="txtBox record_input"   style="width:150px"/>
                           &nbsp;<a href="javascript:void(0);" class="del_label">Delete</a>
                        </div>
                       {/foreach}
                       </div>
                        <div>
                           <a href="javascript:void(0);" id="add_label">Add record label</a>
                       </div>
                    </td>
            
            </tr>
        </table>
        
        </td>
    				
  	</tr>
    
    {/if}
    <tr>
      <td>&nbsp;</td>
    </tr>
  </table>
  
  <div class="locBox floatL" style="width:600px;">
  {if $status==1}
  <h3>Location</h3>
  
 <p class="decBox"> Why do we ask: We love to deliver information relevant to your area (for example, event announcements), that is why we ask you to let us know your location. More info in <a href="/pages/privacy.html">privacy policy</a>.</p>
 <table border="0" cellspacing="0" cellpadding="3">
  <tr>
    <td align="left" valign="middle">Country</td>
    <td colspan="3" align="left" valign="middle" class="xform"><label>
       <select name="fm[country]">
         {foreach key=k item=i from=$countries} 
        <option value="{$i.Iso2}"{if $i.Iso2==$GeoIp.country} selected="selected"{/if}>{$i.Name}</option>
        {/foreach} 
     	</select>
    </label><span id="err_country"></span></td>
    
  </tr>
  
  <tr>
    <td align="left" valign="middle" >City  </td>
    <td><input type="text" class="txtBox" value="{if $fm.city}{$fm.city}{else}{$GeoIp.city}{/if}" style="width: 170px;" id="city" name="fm[city]">&nbsp; &nbsp;Zip : <input type="text" class="txtBox" value="{if $fm.zip}{$fm.zip}{else}{$GeoIp.zip}{/if}" style="width: 50px;" id="zip" name="fm[zip]"><span id="err_zip" class="err" style="float:right;"></span>
    </td>
  </tr>
  <tr>
    <td align="left" valign="middle">&nbsp;</td>
    <td colspan="3" align="left" valign="middle"><label></label>
      <table border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td><input type="checkbox" name="fm[hide_loc]" value="1" id="loc"{if $fm.hide_loc} checked="checked"{/if}></td>
          <td><span class="smtxt">Don't publish my location on my page</span></td>
        </tr>
      </table></td> {/if}
  </tr>
  <tr>
    <td align="left" valign="middle">&nbsp;</td>
    <td colspan="3" align="left" valign="middle" ><span class="smtxt">By clicking the Sign up button, you agree to our <a href="http://artistfan.usawebdept.com/pages/privacy.html" target="_blank">copyright policy</a>, <a href="http://artistfan.usawebdept.com/pages/terms.html" target="_blank">terms of service</a> and<a href="http://artistfan.usawebdept.com/pages/privacy.html" target="_blank"> privacy policy</a>.</span></td>
  </tr>
  <tr>
    <td align="left" valign="middle">&nbsp;</td>
    <td colspan="3" align="left" valign="middle"><label>
      <input type="submit" name="button" id="button" value="Sign up" class="btn" />
    </label></td>
  </tr>
</table>
</div>
</form>
</div>
  
</div>


<!--RIGHT-->

<div class="colSide floatR" style="padding-right:41px;">

<p><strong>Alternatively, you can use your existing account on Facebook or Twitter to sign up to Artistsfan</strong></p>
{if !$FB_AUTH}

<table border="0" cellspacing="0" cellpadding="5">
  <tr>
    <td align="center" valign="middle"><a href="javascript:void(0);" onclick="oUsers.FBLoginCustom('{2}');"><img src="/si/fb-btn1.png" /></a></td>
  </tr>
  <tr>
    <td align="center" valign="middle"><a href="javascript:void(0);" onclick="oUsers.TwtGetAuthUrl();"><img src="/si/tw-btn.png" /></a></td>
  </tr>
</table>
{/if}
</div>

<div class="clear"></div>

</div>

</div>
{/block}